


import{x as e}from"./vendor-35db3a09.js";import{dn as a,dp as i,P as n,du as s,dr as h}from"./index-a8951d67.js";import{u as l,W as d,F as c,T as p,E as t,a as u}from"./index-76f3a60e.js";function m(){const{toc:o,faqRef:r}=l();return e.jsx(a,{page:i.FAQ_ETH_FLOW,shouldLogImpression:!0,children:e.jsxs(d,{ref:r,children:[e.jsx(n,{title:"Selling Native tokens (ETH, xDAI) "}),e.jsx(c,{}),e.jsxs(s,{children:[e.jsx(p,{toc:o,name:"Selling Native tokens (ETH, xDAI) "}),e.jsxs(h,{children:[e.jsx("h2",{id:"overview",children:"Overview"}),e.jsx("h3",{id:"what-is-wrapping",children:"But why all this complicated technical stuff, what is wrapping anyway?"}),e.jsx("p",{children:"Fair point. "}),e.jsx("p",{children:"As you may know, there are multiple different standards for creating tokens: ERC20, ERC721, ERC1155, and so on. These types of tokens are the ones that smart contract protocols in DeFi are built to interact with. But Ether (ETH), as the native token of the Ethereum blockchain, is not an ERC-standard token itself – and is therefore not able to interact with smart contracts directly."}),e.jsx("p",{children:"The workaround is to “wrap” the native token, ETH, into WETH (which is an ERC20 token) via a special contract that mints the token 1:1."}),e.jsx("h3",{id:"how-is-trading-ETH-different",children:"How is trading ETH different from trading other tokens on CoW Protocol?"}),e.jsxs("p",{children:[" ","CoW Protocol settlement contract is only capable of handling ERC20 tokens. To sell ETH, you must therefore either wrap ETH into WETH (an ERC20 token) yourself, or let CoW Protocol do it for you. If you choose the latter, you must interact with the CoW ETH Flow Contract, which holds and places ETH trade orders on your behalf."]}),e.jsx("p",{children:"The CoW ETH Flow Contract is different from the CoW Protocol Settlement Contract. It is an implementation of ERC1271 (production and barn) that handles the entire process of approving, wrapping, and creating an order on CoW Protocol for the user."}),e.jsxs("p",{children:["Selling ETH different from selling other tokens on CoW Protocol:"," ",e.jsxs("ul",{children:[e.jsx("li",{children:"ETH is not an ERC20 token"}),e.jsx("li",{children:"CoW Protocol can only handle ERC20 tokens, so you need to wrap ETH to trade it"}),e.jsxs("li",{children:["We created a contract that wraps ETH for you, called the CoW ETH Flow Contract",e.jsx("p",{children:e.jsx("strong",{children:"Note that this contract works differently than how you are used to interacting with CoW Protocol as it adds an intermediary step where you send your eth."})})]})]})]}),e.jsx("h3",{id:"how-does-eth-flow-contract-work",children:"How does the CoW ETH Flow Contract work? What is this intermediate contract I’m interacting with?"}),e.jsxs("p",{children:[" ","The CoW ETH Flow Contract implements ERC1271, and handles everything needed for the user, such as the approval, wrapping, and order placement. All of these are done automatically without the user needing to do anything. The trading steps are the following:"," ",e.jsxs("ul",{children:[e.jsx("li",{children:"User places a sell order of ETH "}),e.jsx("li",{children:"The ETH leaves the users wallet and goes onto the CoW ETH Flow Contract"}),e.jsx("li",{children:"The CoW ETH Flow Contract then creates a ERC1271 smart contract order with the parameters the user specified in the CoW Swap UI"}),e.jsx("li",{children:"The order is registered in CoW Protocol’s batch auction so that the solvers take it into consideration when settling the batch"}),e.jsx("li",{children:"If the order can be filled / settled by the solvers, then the settlement contract triggers the execution of the pre-interactions from the CoW ETH Flow Contract that result in selling the ETH and obtaining the user wanted token in return"})]})]}),e.jsxs("p",{children:["For more information on the specifics of each step, check out our detailed article"," ",e.jsx(t,{href:"https://medium.com/@cow-protocol/moooove-over-weth-native-eth-trading-is-now-live-on-cow-protocol-96f107e53a49",children:"here"}),"."]}),e.jsx("h3",{id:"what-is-ERC1271-order",children:"What is an ERC1271 order?"}),e.jsxs("p",{children:[" ","An ERC1271 order is one that is created by a smart contract and signed without the need for a private key. This verification scheme allows the contract placing the order to programmatically enforce certain behaviors like interacting with protocol, setting order limits, etc."]}),e.jsx("p",{children:"The implementation of ERC1271 into the CoW Protocol Settlement Contract gave it the power to allow smart contracts to implement their own signature validation scheme for signing messages. This is what makes native native ETH sell flow possible."}),e.jsx("h3",{id:"why-does-ETH-leave-wallet-before-trade-is-settled",children:"Why does my ETH leave my wallet before the trade has settled?"}),e.jsxs("p",{children:[" ","ETH is not an ERC20 token. It is the native token of the Ethereum blockchain. Because ETH is not controlled by another smart contract like ERC20 tokens are, the token cannot interact with smart contracts directly itself."]}),e.jsx("p",{children:"In order to allow a user to sell ETH without any additional steps, we needed to create a new contract that holds ETH for a short period of time so it can automatically place an order on the user’s behalf."}),e.jsx("h3",{id:"why-is-transaction-pending-so-long",children:"Why is my transaction pending for so long?"}),e.jsxs("p",{children:['If your transaction shows "Pending", it hasn’t been validated yet. This might be because:'," ",e.jsxs("ul",{children:[e.jsx("li",{children:"When submitting your transaction through your wallet, it was sent with a low gas price. The order in which transactions are validated on the blockchain depends on the gas price you set: high gas fee transactions can get validated faster, and low gas fee ones have to wait longer to get validated. You can check Etherscan for the time they estimate your transaction will take to get validated"}),e.jsx("li",{children:"You have sent multiple transactions at once with your wallet and the first transaction with a low gas price delays the rest"})]})]}),e.jsx("h3",{id:"what-are-recommanded-gas-prices-for-eth-flow",children:"What are the recommended gas prices when trading with the ETH Flow?"}),e.jsxs("p",{children:[" ","We recommend you use the default gas price your wallet provider suggests at the moment of executing the transaction. That said – typically – the more gas you pay validators, the faster your transaction is validated."]}),e.jsx("p",{children:"Therefore, your CoW ETH sell order is more likely to execute successfully if you pay more gas. That is because the faster the order gets settled, the more likely your order will stay within the current market prices, and the less likely your order will fail because the market price moved against it."}),e.jsx("h3",{id:"is-it-cheaper-to-wrap-or-directly-trad-eth",children:"Is it cheaper overall to wrap first and then trade, or to trade directly with ETH?"}),e.jsxs("p",{children:["Honestly, it depends on what type of CoW you are…"," ",e.jsxs("ul",{children:[e.jsx("li",{children:"If it is your first time using CoW Swap, it will likely be more expensive to wrap ETH. This is because you need to approve ETH (tx cost), wrap ETH (tx cost), and approve WETH (tx cost) before placing the trade. However, for subsequent trades, wrapping should always be cheaper than trading directly with ETH"}),e.jsx("li",{children:"If you are a diehard CoW Swap fan, and have already gone through all the approval transactions, it is a different story as you only need to execute the wrapping transaction. Trading with WETH will usually be cheaper for you"})]})]}),e.jsx("p",{children:"The reason we developed the native ETH sell flow is because of the demand from the CoWmunity for this feature, and to allow users to trade more quickly while avoiding extra token approvals. However, if you are going to stick around for a while, and if you care about costs, we recommend wrapping your ETH instead of trading it directly."}),e.jsx("h3",{id:"has-contract-been-audited",children:"Has the contract been audited?"}),e.jsx("p",{children:"Yes, the CoW Protocol team always takes security very seriously and, as a practice that has continued after our spin out from Gnosis DAO, we audit all smart contracts before deploying them."}),e.jsxs("p",{children:["The audit was done by G0 and you can find the result"," ",e.jsx(t,{href:"https://github.com/cowprotocol/ethflowcontract/tree/main/audits",children:"here"}),"."]}),e.jsx("h2",{id:"trading-questions",children:"Trading Questions"}),e.jsx("h3",{id:"why-is-default-slippage-set-to-2",children:"Why is the default slippage setting set to 2% instead of the usual 0.5% for other tokens?"}),e.jsxs("p",{children:[" ","Unlike for other tokens, the default slippage is set to 2% as there are more intermediate steps in the ETH sell process than in any other sell tokens. This slippage is meant to be able to cover the price updates that can happen within the market from the time it takes to create the sell order, get the transaction for the ETH transfer into the CoW ETH Flow Contract validated, place the order, and have it executed."]}),e.jsx("p",{children:"If there is not enough slippage to cover for market shifts within this timeframe, the sell order is most likely to fail."}),e.jsx("p",{children:"As mentioned above, this slippage % has been decided to be the minimum slippage required to be able to execute these types of orders."}),e.jsx("p",{children:"But don’t worry, if the trade reverts, you always get your trading ETH back."}),e.jsx("h3",{id:"what-happens-if-my-order-expires",children:"What happens if my order expires or if I cancel? Do I get my ETH back?"}),e.jsx("p",{children:" Yes you will ALWAYS get your ETH back if the order is not executed successfully."}),e.jsx("p",{children:"If because the order expired or you canceled the transaction, the protocol was not able to execute the ETH sell order, the ETH held by the contract on your behalf is returned to your wallet so that is yours again."}),e.jsx("h3",{id:"do-i-pay-any-sort-of-fee-for-cancelation",children:"Do I pay any sort of fee for the cancellation and/or expiration of my order?"}),e.jsxs("p",{children:[" ","If you cancel or your order reverts, CoW Protocol will give your ETH back but the validators will keep the validation fee."]}),e.jsx("p",{children:"You do not pay a trading fee to CoW Protocol, however, you do pay a fee to validators. This fee is paid to validators when you execute the transactions that transfers the ETH from your wallet, to the CoW ETH Flow Contract. This is something CoW Protocol does not control or benefit from – it is part of the way the network works."}),e.jsx("h3",{id:"what-does-sending-tx-in-1st-step-mean",children:"What does sending tx in the 1st step mean? "}),e.jsx("p",{children:"The 1st step that you see in the UI is represented by the first circle of the process."}),e.jsx("p",{children:"This circle informs you that the first transaction you do in the CoW ETH Flow process is the one sending your ETH to the contract so that it can place the order on your behalf."}),e.jsx("h3",{id:"what-does-order-crating-mean",children:"Once the tx is sent, what does order creating mean (the 2nd step)?"}),e.jsx("p",{children:" The 2st step that you see in the UI is represented by the second circle of the process."}),e.jsx("p",{children:"This circle informs you that the transaction with the ETH transfer from the 1st step has been mined, and that your order has been placed with the CoW ETH Flow Contract, and a ERC1271 smart order will be created and placed on the CoW Protocol Settlement contract."}),e.jsx("h3",{id:"what-does-order-crated-mean",children:"What does “order is created” mean?"}),e.jsx("p",{children:"It means that the CoW ETH Flow Contract has already created the ERC1271 smart order and placed it on the settlement contract."}),e.jsx("h3",{id:"what-does-open-order-mean",children:"What does Open order mean? "}),e.jsx("p",{children:"It means that the CoW ETH Flow Contract has successfully created the ERC1271 smart order and placed it on the settlement contract. The order is valid, and will eventually get settled by CoW Protocol solvers or expire if it is not executed within a timeframe of 3 hours."}),e.jsx("h3",{id:"what-does-order-is-filled-mean",children:"What does “order is filled” mean?"}),e.jsx("p",{children:"It means that your order has been completely filled and executed. You have now sold ETH natively through CoW Swap."}),e.jsx("h3",{id:"what-does-order-expired-mean",children:"What does “order expired” mean? "}),e.jsx("p",{children:"It means that your order has not been filled within the 10 minute window enforced. The main reason for your order to expire is the market's volatility, the price of ETH shifted and the original order placed is out of price for a long period of time."}),e.jsx("h3",{id:"why-is-my-order-being-refunded",children:"Why is my order being refunded after the order expired? "}),e.jsx("p",{children:"The order expired and since the protocol was not able to execute the ETH sell order within the average time window set, the ETH held by the contract on your behalf is returned to your wallet so that is yours again."}),e.jsx("p",{children:"This is because on the 1st step of the sell process, your ETH was transferred to the CoW ETH Flow Contract and since CoW Protocol is all about self-custody, it is right to return the transferred ETH immediately if the order expired."}),e.jsx("h3",{id:"how-can-i-check-i-received-the-refund-when-expired",children:"How can I check I actually received the refund after my order expired?"}),e.jsx("p",{children:"You can click on the hyperlink “View transaction” on the progress modal which will redirect you to etherscan.io to see the actual transaction on the blockchain."}),e.jsx("p",{children:"You can search for your wallet address on etherscan.io and see that the balance is right where it should be."}),e.jsxs("p",{children:["Additionally, you can also check the smart contract interactions via etherscan (",e.jsx(t,{href:"https://etherscan.io/address/0x40A50cf069e992AA4536211B23F286eF88752187",children:"production"})," ","and"," ",e.jsx(t,{href:"https://etherscan.io/address/0xD02De8Da0B71E1B59489794F423FaBBa2AdC4d93",children:"barn"}),") and find the one that corresponds to your wallet, although this method may be more cumbersome."]}),e.jsxs("h3",{id:"what-does-order-creation-failed-mean",children:["What does “order creation failed - price quote expired” mean?"," "]}),e.jsx("p",{children:"Even though the CoW ETH Flow Contract successfully received your ETH, the amount of time between when you sent the transaction and when it was included in a block was too long."}),e.jsx("p",{children:"During that time frame, the market price shifted against you, and the CoW ETH Flow Contract was not able to place a viable order in CoW Protocol."}),e.jsx("p",{children:"That said, don’t worry, you do get your ETH back when the order does not execute successfully, you are only charged a gas fee for executing the transaction that is paid to the validators of Ethereum and not CoW Protocol. You can check the status of your refund by clicking on the “Initiating refund” hyperlink under the round flag icon."}),e.jsx("h3",{id:"why-is-my-rder-refunded-after-creation-failed",children:"Why is my order being refunded after “order creation failed - expired before creation”?"}),e.jsx("p",{children:"Since the ETH held by the contract on your behalf is no longer needed there because the order creation failed, it is returned to your wallet so that is yours again."}),e.jsx("p",{children:"This is because on the 1st step of the sell process, your ETH was transferred to the CoW ETH Flow Contract and since CoW Protocol is all about self-custody, it is right to return the transferred ETH immediately if the order expired."}),e.jsx("p",{children:"While this is operational for the first release, keep in mind that cancellation will NOT ALWAYS be free."}),e.jsx(u,{})]})]})]})})}export{m as default};
