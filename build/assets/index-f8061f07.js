


import{x as o,r as d,a4 as p}from"./vendor-35db3a09.js";import{dq as l,dr as m,du as f}from"./index-a8951d67.js";function g(){return 5}function w(s){return o.jsx("div",{style:{border:"1px solid pink",height:"150px",width:"100%"},children:o.jsxs("h1",{style:{color:"pink"},children:[s.children," (return5 = ",g(),")"]})})}const P="2.0",E="*",W=["connect","disconnect","chainChanged","accountsChanged"];class y{constructor(e){this.contentWindow=e,this.ethereumProvider=null,this.requests={},this.processEvent=t=>{t.data.jsonrpc==="2.0"&&(this.ethereumProvider?this.processRequest(t.data):this.requests[t.data.id]=t.data)},window.addEventListener("message",this.processEvent)}disconnect(){this.ethereumProvider=null,window.removeEventListener("message",this.processEvent)}onConnect(e){this.ethereumProvider=e,Object.keys(this.requests).forEach(t=>{this.processRequest(this.requests[t])}),this.requests={},W.forEach(t=>{e.on(t,n=>{this.postMessage({method:t,params:[n]})})})}processRequest(e){if(!this.ethereumProvider)return;(e.method==="enable"?this.ethereumProvider.enable():this.ethereumProvider.request(e)).then(n=>{this.postMessage({id:e.id,result:n})}).catch(n=>{this.postMessage({id:e.id,error:n})})}postMessage(e){this.contentWindow.postMessage({jsonrpc:P,...e},E)}}const x={local:"http://localhost:3000",prod:"https://swap.cow.fi"};function S(s){const e=x[s.env],t=h(s),n=u(s);return e+"/#"+t+"?"+n}function h(s){const{chainId:e,tradeAssets:t,tradeType:n}=s,r=t?[t.sell.asset,t.buy.asset].map(encodeURIComponent).join("/"):"";return`/${e}/widget/${n}/${r}`}function u(s){const{tradeAssets:e,theme:t}=s,n=new URLSearchParams;if(e){const{sell:r,buy:i}=e;r.amount&&n.append("sellAmount",r.amount),i.amount&&n.append("buyAmount",i.amount)}return t&&n.append("theme",t),n}const a="cowSwapWidget";function j(s,e){const{container:t,provider:n}=s,r=R(s,e);t.innerHTML="",t.appendChild(r);const{contentWindow:i}=r;if(!i)throw new Error("Iframe does not contain a window!");return k(i,s.metaData),n&&new y(i).onConnect(n),c=>v(c,i)}function R(s,e){const{width:t,height:n}=s,r=document.createElement("iframe");return r.src=S(e.urlParams),r.width=`${t}px`,r.height=`${n}px`,r.style.border="0",r}function v(s,e){const t=h(s.urlParams),n=u(s.urlParams).toString();e.postMessage({key:a,method:"update",urlParams:{pathname:t,search:n},appParams:s.appParams},"*")}function k(s,e){window.addEventListener("message",t=>{t.data.key!==a||t.data.method!=="activate"||s.postMessage({key:a,method:"metaData",metaData:e},"*")})}function q(s){const e=d.useRef(null);return d.useEffect(()=>{if(e.current){const{params:t,settings:n}=s;j({...t,container:e.current},n)}},[e,s]),o.jsx("div",{ref:e})}const C=p(f).withConfig({displayName:"KitchenSink__Wrapper",componentId:"sc-1pn5iq2-0"})([""]);function T(){const s={width:600,height:700,metaData:{appKey:"KitchenSink",url:"/"}},e={urlParams:{chainId:1,tradeType:"swap",env:"local"},appParams:{}};return o.jsxs(C,{children:[o.jsx(l,{children:"Kitchen Sink"}),o.jsxs(m,{children:[o.jsx(w,{children:"pink title"}),o.jsx(q,{params:s,settings:e})]})]})}export{T as default};
